package com.rest;
import org.json.simple.JSONArray;
import org.json.simple.JSONObject;
import org.junit.Test;

import io.restassured.RestAssured;
import io.restassured.http.Method;
import io.restassured.response.Response;
import io.restassured.specification.RequestSpecification;


public class Example {
	
	@Test
	 public void GetWeatherDetails()
	 {  
		long start = System.currentTimeMillis();
	 // Specify the base URL to the RESTful web service
	 RestAssured.baseURI = "https://http-hunt.thoughtworks-labs.net/challenge";
	 
	 // Get the RequestSpecification of the request that you want to sent
	 // to the server. The server is specified by the BaseURI that we have
	 // specified in the above step.
	 RequestSpecification httpRequest = RestAssured.given();
	 httpRequest.header("userId","Q-_hTQIU");
	 
	 
	 // Make a request to the server by specifying the method Type and the method URL.
	 // This will return the Response from the server. Store the response in a variable.
	 Response response = httpRequest.request(Method.GET);
	
	 
	 //String str=response.jsonPath().get("City");
	 
	// System.out.println(str);
	 // Now let us print the body of the message to see what response
	 // we have recieved from the server
	 String responseBody = response.getBody().asString();
	 
	 System.out.println("Response Body is =>  " + responseBody);
	 
     RestAssured.baseURI ="http://restapi.demoqa.com/customer";
     RequestSpecification request = RestAssured.given();
     
     request.header("content-type","application/json");

     JSONObject requestParams = new JSONObject();
     requestParams.put("count", "963"); // Cast
     
     
     JSONObject mainObj = new JSONObject();
     mainObj.put("Output", requestParams);
     
     JSONArray array = new JSONArray();
     array.add(requestParams);
     
    
  

     request.body(requestParams.toJSONString());
     Response response1 = request.post("/register");
     
     int statusCode = response1.getStatusCode();
     System.out.println("The status code recieved: " + statusCode);

     System.out.println("Response body: " + response1.body().asString());


	 
	 
	 
	 

	 //System.out.println(System.currentTimeMillis() - start);
	 
	 }
	 

}